---
timestamp: 'Sun Oct 19 2025 21:39:58 GMT-0400 (Eastern Daylight Time)'
content_id: ebc09953bdef9625cfa4a5ad4acb854434efff44be085437f7a0875abf518a18
---

# file: ./src/concepts/Bundle/implementation.ts

```typescript
import { User } from "@concepts/User/implementation.ts";
import { Item } from "@concepts/Item/implementation.ts";

// A single bundle
export interface Bundle {
  owner: User;
  name: string;
  members: Item[];
}

export class Bundles {
  private bundles: Bundle[] = [];

  createBundle(user: User, name: string): Bundle | void {
    // Check that user exists
    if (!user.username) {
      console.log("user doesn't exist");
      return;
    }
    // Check that bundle name is unique among user's bundles
    for (const bundle of this.bundles) {
      if (
        bundle.owner.username == bundle.owner.username && bundle.name == name
      ) {
        console.log("bundle already exists in user's bundles");
        return;
      }
    }
    const bundle: Bundle = { owner: user, name, members: [] };
    // Add bundle to list of bundles
    this.bundles.push(bundle);
    return bundle;
  }

  deleteBundle(user: User, name: string): void {
    // Check that bundle exists
    let exists = false;
    let foundBundle = undefined;
    for (const bundle of this.bundles) {
      if (bundle.name == name) {
        exists = true;
        foundBundle = bundle;
        break;
      }
    }
    if (!exists) {
      console.log("bundle doesn't exist");
      return;
    }
    if (foundBundle) {
      // Check that bundle belongs to user
      if (foundBundle.owner.username !== user.username) {
        console.log("bundle doesn't belong to user");
        return;
      }
      this.bundles = this.bundles.filter((b) => b !== foundBundle);
      return;
    }
  }

  addItemToBundle(user: User, item: Item, bundle: Bundle) {
    // Check that item and bundle exist
    if (!item.name || !bundle.name) {
      console.log("item or bundle doesn't exist");
      return;
    }
    // Check that item and bundle both belong to user
    if (
      item.owner.username !== user.username ||
      bundle.owner.username !== user.username
    ) {
      console.log("item or bundle doesn't belong to user");
      return;
    }
    if (bundle.members.includes(item)) {
      console.log("item is already in bundle");
      return;
    }
    bundle.members.push(item);
    return;
  }

  removeItemFromBundle(user: User, item: Item, bundle: Bundle) {
    // Check that item and bundle exist
    if (!item.name || !bundle.name) {
      console.log("item or bundle doesn't exist");
      return;
    }
    // Check that item and bundle both belong to user
    if (
      item.owner.username !== user.username ||
      bundle.owner.username !== user.username
    ) {
      console.log("item or bundle doesn't belong to user");
      return;
    }
    // Check if item is in bundle
    if (!bundle.members.includes(item)) {
      console.log("item is not in bundle");
      return;
    }
    bundle.members = bundle.members.filter((b) => b !== item);
    return;
  }

  getBundles(): Bundle[] {
    return this.bundles;
  }

  equals(bundle1: Bundle, bundle2: Bundle): boolean {
    if (bundle1.members.length !== bundle2.members.length) {
      return false;
    }
    for (let i = 0; i < bundle1.members.length; i++) {
      if (bundle1.members[i].name !== bundle2.members[i].name) {
        return false;
      }
    }
    return bundle1.owner.username == bundle2.owner.username &&
      bundle1.name == bundle2.name;
  }
}

```
